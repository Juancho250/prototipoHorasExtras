<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="descarga.png" type="image/x-icon" />
    <title>HORAS EXTRAS</title>
    <style>
      canvas {
        width: 300px;
        height: 100px;
        background-color: #0d0909;
      }
    </style>
  </head>
  <body>
    <main class="contenedor">
      <form action="" method="post">
        <label for="">Nombre del trabajador</label>
        <input name="nombre" type="text" placeholder="Digite su nombre">

        <label for="">Cedula</label>
        <input name="cedula" type="text" placeholder="Digite cedula : ">

        <label for="">Edad</label>
        <input name="edad" type="number" placeholder="Digite su edad" />

        <label for="">Sexo</label>
        <select name="sexo" id="">
          <option value="">Seleccionar</option>
          <option value="">M</option>
          <option value="">F</option>
        </select>

        <label for="">Fecha</label>
        <input name="fecha" type="date" name="" id="" />

        <label for="">Actividad que va a realizar:</label>
        <input
          name="actividad"
          type="text"
          placeholder="Actividad de hora extra"
        />

        <label for="">Hora de Inicio</label>
        <input
          name="hora_inicio"
          type="time"
          placeholder="Inicio de su hora extra"
        />

        <label for="">Hora final</label>
        <input
          name="hora_final"
          type="time"
          placeholder="Fin de horas extras"
        />

        <label for="">Tipo de hora extra</label>
        <select name="tipo_hora_extra" name="" id="">
          <option value="">Seleccionar</option>
          <option value="">Hora extra Diurna</option>
          <option value="">Hora Extra Nocturna</option>
          <option value="">Hora Extra diurana Festiva</option>
          <option value="">Hora Extra Festiva</option>
          <option value="">Recargo</option>
        </select>

        <p>Firmar a continuación:</p>
        <canvas id="pizarra"></canvas>
      </form>
    </main>

    <script src="">
      //======================================================================
      // VARIABLES
      //======================================================================
      let miCanvas = document.querySelector("#pizarra");
      let lineas = [];
      let correccionX = 0;
      let correccionY = 0;
      let pintarLinea = false;
      // Marca el nuevo punto
      let nuevaPosicionX = 0;
      let nuevaPosicionY = 0;

      let posicion = miCanvas.getBoundingClientRect();
      correccionX = posicion.x;
      correccionY = posicion.y;

      miCanvas.width = 500;
      miCanvas.height = 500;

      //======================================================================
      // FUNCIONES
      //======================================================================

      /**
       * Funcion que empieza a dibujar la linea
       */
      function empezarDibujo() {
        pintarLinea = true;
        lineas.push([]);
      }

      /**
       * Funcion que guarda la posicion de la nueva línea
       */
      function guardarLinea() {
        lineas[lineas.length - 1].push({
          x: nuevaPosicionX,
          y: nuevaPosicionY,
        });
      }

      /**
       * Funcion dibuja la linea
       */
      function dibujarLinea(event) {
        event.preventDefault();
        if (pintarLinea) {
          let ctx = miCanvas.getContext("2d");
          // Estilos de linea
          ctx.lineJoin = ctx.lineCap = "round";
          ctx.lineWidth = 10;
          // Color de la linea
          ctx.strokeStyle = "#fff";
          // Marca el nuevo punto
          if (event.changedTouches == undefined) {
            // Versión ratón
            nuevaPosicionX = event.layerX;
            nuevaPosicionY = event.layerY;
          } else {
            // Versión touch, pantalla tactil
            nuevaPosicionX = event.changedTouches[0].pageX - correccionX;
            nuevaPosicionY = event.changedTouches[0].pageY - correccionY;
          }
          // Guarda la linea
          guardarLinea();
          // Redibuja todas las lineas guardadas
          ctx.beginPath();
          lineas.forEach(function (segmento) {
            ctx.moveTo(segmento[0].x, segmento[0].y);
            segmento.forEach(function (punto, index) {
              ctx.lineTo(punto.x, punto.y);
            });
          });
          ctx.stroke();
        }
      }

      /**
       * Funcion que deja de dibujar la linea
       */
      function pararDibujar() {
        pintarLinea = false;
        guardarLinea();
      }

      //======================================================================
      // EVENTOS
      //======================================================================

      // Eventos raton
      miCanvas.addEventListener("mousedown", empezarDibujo, false);
      miCanvas.addEventListener("mousemove", dibujarLinea, false);
      miCanvas.addEventListener("mouseup", pararDibujar, false);

      // Eventos pantallas táctiles
      miCanvas.addEventListener("touchstart", empezarDibujo, false);
      miCanvas.addEventListener("touchmove", dibujarLinea, false);
    </script>
  </body>
</html>
